<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Recipe Hunter">
    <meta name="format-detection" content="telephone=no">
    <title>Recipe Hunter - Your Personal Recipe Manager</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body data-theme="claude">
    <!-- Preferences Button -->
    <div class="preferences-button">
        <button class="theme-btn" id="preferencesBtn" title="Preferences">
            <span class="theme-icon">‚öôÔ∏è</span>
        </button>
    </div>

    <!-- Main Container -->
    <div class="container" id="mainContainer">
        <!-- Header -->
        <header class="header" id="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üç≥</span>
                    <span class="logo-text">Recipe Hunter</span>
                </div>
                <!-- Hamburger Menu Button (Mobile Only) -->
                <button class="hamburger-btn" id="hamburgerBtn" aria-label="Toggle menu">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                <!-- Desktop Navigation -->
                <nav class="nav" id="desktopNav">
                    <button class="nav-btn active" data-page="home">
                        <span class="nav-icon">üè†</span>
                        <span>Home</span>
                    </button>
                    <button class="nav-btn" data-page="tags">
                        <span class="nav-icon">üè∑Ô∏è</span>
                        <span>Tags</span>
                    </button>
                    <button class="nav-btn" data-page="settings">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Settings</span>
                    </button>
                    <button class="nav-btn" data-page="shopping-list">
                        <span class="nav-icon">üõí</span>
                        <span>Shopping</span>
                    </button>
                    <button class="nav-btn" data-page="import">
                        <span class="nav-icon">üíæ</span>
                        <span>Data</span>
                    </button>
                    <button class="nav-btn" data-page="add-recipe">
                        <span class="nav-icon">‚ûï</span>
                        <span>Add Recipe</span>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

        <!-- Mobile Slide-In Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-header">
                <div class="mobile-menu-logo">
                    <span class="logo-icon">üç≥</span>
                    <span class="logo-text">Recipe Hunter</span>
                </div>
                <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Close menu">
                    <span>‚úï</span>
                </button>
            </div>
            <nav class="mobile-menu-nav">
                <button class="mobile-nav-btn active" data-page="home">
                    <span class="nav-icon">üè†</span>
                    <span>Home</span>
                </button>
                <button class="mobile-nav-btn" data-page="tags">
                    <span class="nav-icon">üè∑Ô∏è</span>
                    <span>Tags</span>
                </button>
                <button class="mobile-nav-btn" data-page="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </button>
                <button class="mobile-nav-btn" data-page="shopping-list">
                    <span class="nav-icon">üõí</span>
                    <span>Shopping List</span>
                </button>
                <button class="mobile-nav-btn" data-page="import">
                    <span class="nav-icon">üíæ</span>
                    <span>Import & Export</span>
                </button>
                <button class="mobile-nav-btn" data-page="add-recipe">
                    <span class="nav-icon">‚ûï</span>
                    <span>Add Recipe</span>
                </button>
            </nav>
        </div>

        <!-- Search Section -->
        <div class="search-section" id="searchSection">
            <div class="search-container">
                <div class="welcome-text">
                    <h1>Welcome to Recipe Hunter</h1>
                    <p>Search your recipes, discover new favorites</p>
                </div>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search recipes by name, ingredients, or tags..." autocomplete="off">
                    <button class="search-btn" id="searchBtn">
                        <span class="search-icon">üîç</span>
                    </button>
                </div>
                <div class="quick-tags-container">
                    <div class="quick-tags" id="quickTags">
                        <!-- Tags will be dynamically inserted here -->
                    </div>
                    <div class="filter-actions">
                        <button class="favorites-toggle-btn" id="toggleFavoritesBtn" onclick="toggleFavoritesView()">
                            <span class="fav-icon">‚òÜ</span> Show Favorites
                        </button>
                        <button class="clear-filters-btn" id="clearFiltersBtn" style="display: none;">
                            <span>‚úï</span> Clear filters
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area" id="contentArea">
            <!-- Home Page -->
            <div class="page active" id="homePage">
                <div class="results-container" id="resultsContainer">
                    <!-- Recipe cards will be inserted here -->
                </div>
                <div class="empty-state" id="emptyState">
                    <div class="empty-icon">üìö</div>
                    <h2>No recipes yet</h2>
                    <p>Start by importing recipes or adding a new one</p>
                    <div class="empty-state-actions">
                        <button class="btn btn-primary empty-state-btn" onclick="openRecipeEditorModal()">
                            <span class="btn-icon">‚ûï</span>
                            <span>Add Your First Recipe</span>
                        </button>
                        <button class="btn btn-secondary empty-state-btn" onclick="navigateTo('import')">
                            <span class="btn-icon">üì•</span>
                            <span>Import Recipes</span>
                        </button>
                        <button class="btn btn-accent empty-state-btn" onclick="importSampleRecipes()">
                            <span class="btn-icon">‚ú®</span>
                            <span>Browse Sample Recipes</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tags Page -->
            <div class="page" id="tagsPage">
                <div class="page-header">
                    <h2>Manage Tags</h2>
                    <p>Organize your recipes with custom tags</p>
                </div>
                <div class="tags-management">
                    <div class="add-tag-section">
                        <input type="text" id="newTagInput" placeholder="Enter new tag name..." maxlength="30">
                        <input type="color" id="newTagColor" value="#8B5CF6">
                        <button class="btn btn-primary" id="addTagBtn">Add Tag</button>
                    </div>
                    <div class="tags-list" id="tagsList">
                        <!-- Tags will be listed here -->
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="settingsPage">
                <div class="page-header">
                    <h2>Settings</h2>
                    <p>Customize your Recipe Hunter experience</p>
                </div>
                <div id="settingsContent">
                    <!-- Settings will be dynamically rendered here -->
                </div>
            </div>

            <!-- Shopping List Page -->
            <div class="page" id="shopping-listPage">
                <div class="page-header">
                    <h2>Shopping List</h2>
                    <p>Manage your shopping list from recipes</p>
                </div>
                <div class="shopping-list-container">
                    <div class="shopping-list-actions">
                        <button class="btn btn-primary" id="addToShoppingListBtn">
                            ‚ûï Add from Recipes
                        </button>
                        <button class="btn btn-secondary" id="addCustomItemBtn">
                            üìù Add Custom Item
                        </button>
                        <button class="btn btn-danger" id="clearShoppingListBtn">
                            üóëÔ∏è Clear All
                        </button>
                    </div>
                    <div class="shopping-list-content" id="shoppingListContent">
                        <!-- Shopping list items will be rendered here -->
                    </div>
                    <div class="shopping-list-empty" id="shoppingListEmpty">
                        <div class="empty-icon">üõí</div>
                        <h3>Your shopping list is empty</h3>
                        <p>Add ingredients from your recipes or create custom items</p>
                    </div>
                </div>
            </div>

            <!-- Import Page -->
            <div class="page" id="importPage">
                <div class="page-header">
                    <h2>Import & Export Recipes</h2>
                    <p>Upload recipe files or folders in JSON format, or export your collection</p>
                </div>
                <div class="import-section">
                    <div class="export-section">
                        <h3>üì§ Export Your Recipes</h3>
                        <p>Download all your recipes as a JSON backup file</p>
                        <button class="btn btn-primary" onclick="exportAllRecipes()">Export All Recipes</button>
                    </div>

                    <div class="section-divider"></div>

                    <h3>üì• Import Recipes</h3>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <h3>Drop files here</h3>
                        <p>or click to browse</p>
                        <input type="file" id="singleFileInput" multiple accept=".json,.txt">
                    </div>
                    <div class="import-format-info">
                        <h3>Expected JSON Format:</h3>
                        <pre>{
  "name": "Recipe Name",
  "ingredients": ["ingredient 1", "ingredient 2"],
  "instructions": ["step 1", "step 2"],
  "tags": ["tag1", "tag2"],
  "prepTime": "15 min",
  "cookTime": "30 min",
  "servings": 4,
  "notes": "Optional notes",
  "image": "data:image/png;base64,..." (optional base64 image)
}</pre>
                    </div>
                    <div class="import-results" id="importResults"></div>
                </div>
            </div>

            <!-- Add/Edit Recipe Page (kept for backwards compatibility, hidden) -->
            <div class="page" id="addRecipePage" style="display: none;">
            </div>
        </div>
    </div>

    <!-- Recipe Detail Modal -->
    <div class="modal" id="recipeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalRecipeName"></h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Recipe details will be inserted here -->
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="modalFavoriteBtn">‚òÜ Add to Favorites</button>
                <button class="btn btn-secondary" id="editRecipeBtn">Edit</button>
                <button class="btn btn-danger" id="deleteRecipeBtn">Delete</button>
            </div>
        </div>
    </div>

    <!-- Recipe Editor Modal -->
    <div class="modal recipe-editor-modal" id="recipeEditorModal">
        <div class="modal-content modal-content-large">
            <div class="modal-header">
                <h2 id="recipeFormTitle">Add New Recipe</h2>
                <button class="modal-close" id="recipeEditorClose">&times;</button>
            </div>
            <div class="modal-body">
                <form class="recipe-form" id="recipeForm">
                    <input type="hidden" id="recipeId">

                    <div class="form-group">
                        <label for="recipeName">Recipe Name *</label>
                        <input type="text" id="recipeName" required placeholder="e.g., Chocolate Chip Cookies">
                    </div>

                    <div class="form-group">
                        <label for="recipeImage">Recipe Image</label>
                        <div class="image-upload-container">
                            <div class="image-preview" id="imagePreview">
                                <div class="image-placeholder">
                                    <span class="image-icon">üì∑</span>
                                    <p>No image selected</p>
                                </div>
                            </div>
                            <div class="image-upload-controls">
                                <input type="file" id="recipeImage" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-secondary" id="uploadImageBtn">Choose Image</button>
                                <button type="button" class="btn btn-secondary" id="removeImageBtn" style="display: none;">Remove Image</button>
                                <p class="image-help-text">Supported formats: JPG, PNG, GIF (max 5MB)</p>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="prepTime">Prep Time</label>
                            <input type="text" id="prepTime" placeholder="e.g., 15 min">
                        </div>
                        <div class="form-group">
                            <label for="cookTime">Cook Time</label>
                            <input type="text" id="cookTime" placeholder="e.g., 30 min">
                        </div>
                        <div class="form-group">
                            <label for="servings">Servings</label>
                            <input type="number" id="servings" min="1" placeholder="4">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="ingredients">Ingredients * <span class="label-hint">(supports HTML formatting)</span></label>
                        <div class="rich-text-toolbar" data-target="ingredients">
                            <button type="button" class="toolbar-btn" data-command="bold" title="Bold"><b>B</b></button>
                            <button type="button" class="toolbar-btn" data-command="italic" title="Italic"><i>I</i></button>
                            <button type="button" class="toolbar-btn" data-command="underline" title="Underline"><u>U</u></button>
                            <button type="button" class="toolbar-btn" data-command="foreColor" title="Text Color">üé®</button>
                            <input type="color" class="color-picker" data-target="ingredients" style="display: none;">
                        </div>
                        <div id="ingredients" class="rich-text-editor" contenteditable="true" data-placeholder="Enter each ingredient on a new line
e.g.,
2 cups flour
1 cup sugar
2 eggs

You can format text with colors and styles!"></div>
                    </div>

                    <div class="form-group">
                        <label for="instructions">Instructions * <span class="label-hint">(supports HTML formatting)</span></label>
                        <div class="rich-text-toolbar" data-target="instructions">
                            <button type="button" class="toolbar-btn" data-command="bold" title="Bold"><b>B</b></button>
                            <button type="button" class="toolbar-btn" data-command="italic" title="Italic"><i>I</i></button>
                            <button type="button" class="toolbar-btn" data-command="underline" title="Underline"><u>U</u></button>
                            <button type="button" class="toolbar-btn" data-command="foreColor" title="Text Color">üé®</button>
                            <input type="color" class="color-picker" data-target="instructions" style="display: none;">
                        </div>
                        <div id="instructions" class="rich-text-editor" contenteditable="true" data-placeholder="Enter each step on a new line
e.g.,
1. Preheat oven to 350¬∞F
2. Mix dry ingredients
3. Combine wet ingredients

You can format text with colors and styles!"></div>
                    </div>

                    <div class="form-group">
                        <label for="recipeTags">Tags</label>
                        <div class="tags-input-container">
                            <div class="selected-tags" id="selectedTags"></div>
                            <input type="text" id="recipeTagsInput" placeholder="Type to add tags...">
                        </div>
                        <div class="tags-suggestions" id="tagsSuggestions"></div>
                    </div>

                    <div class="form-group">
                        <label for="notes">Notes <span class="label-hint">(supports HTML formatting)</span></label>
                        <div class="rich-text-toolbar" data-target="notes">
                            <button type="button" class="toolbar-btn" data-command="bold" title="Bold"><b>B</b></button>
                            <button type="button" class="toolbar-btn" data-command="italic" title="Italic"><i>I</i></button>
                            <button type="button" class="toolbar-btn" data-command="underline" title="Underline"><u>U</u></button>
                            <button type="button" class="toolbar-btn" data-command="foreColor" title="Text Color">üé®</button>
                            <input type="color" class="color-picker" data-target="notes" style="display: none;">
                        </div>
                        <div id="notes" class="rich-text-editor" contenteditable="true" data-placeholder="Any additional notes or tips...

You can format text with colors and styles!"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Recipe</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Preferences Modal -->
    <div class="modal preferences-modal" id="preferencesModal">
        <div class="modal-content modal-content-preferences">
            <div class="modal-header">
                <h2>Preferences</h2>
                <button class="modal-close" id="preferencesClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="preferences-section">
                    <h3>Theme</h3>
                    <p class="preferences-description">Choose your preferred color theme</p>
                    <div class="theme-grid" id="themeGrid">
                        <button class="theme-card" data-theme="claude">
                            <div class="theme-preview theme-preview-claude">
                                <div class="theme-preview-bar"></div>
                                <div class="theme-preview-content"></div>
                            </div>
                            <div class="theme-card-info">
                                <div class="theme-card-name">Claude</div>
                                <div class="theme-card-description">Default purple accent</div>
                            </div>
                            <div class="theme-card-check">‚úì</div>
                        </button>
                        <button class="theme-card" data-theme="dark">
                            <div class="theme-preview theme-preview-dark">
                                <div class="theme-preview-bar"></div>
                                <div class="theme-preview-content"></div>
                            </div>
                            <div class="theme-card-info">
                                <div class="theme-card-name">Dark</div>
                                <div class="theme-card-description">Dark mode</div>
                            </div>
                            <div class="theme-card-check">‚úì</div>
                        </button>
                        <button class="theme-card" data-theme="light">
                            <div class="theme-preview theme-preview-light">
                                <div class="theme-preview-bar"></div>
                                <div class="theme-preview-content"></div>
                            </div>
                            <div class="theme-card-info">
                                <div class="theme-card-name">Light</div>
                                <div class="theme-card-description">Bright and clean</div>
                            </div>
                            <div class="theme-card-check">‚úì</div>
                        </button>
                        <button class="theme-card" data-theme="forest">
                            <div class="theme-preview theme-preview-forest">
                                <div class="theme-preview-bar"></div>
                                <div class="theme-preview-content"></div>
                            </div>
                            <div class="theme-card-info">
                                <div class="theme-card-name">Forest</div>
                                <div class="theme-card-description">Nature-inspired greens</div>
                            </div>
                            <div class="theme-card-check">‚úì</div>
                        </button>
                        <button class="theme-card" data-theme="ocean">
                            <div class="theme-preview theme-preview-ocean">
                                <div class="theme-preview-bar"></div>
                                <div class="theme-preview-content"></div>
                            </div>
                            <div class="theme-card-info">
                                <div class="theme-card-name">Ocean</div>
                                <div class="theme-card-description">Calming blues</div>
                            </div>
                            <div class="theme-card-check">‚úì</div>
                        </button>
                        <button class="theme-card" data-theme="sunset">
                            <div class="theme-preview theme-preview-sunset">
                                <div class="theme-preview-bar"></div>
                                <div class="theme-preview-content"></div>
                            </div>
                            <div class="theme-card-info">
                                <div class="theme-card-name">Sunset</div>
                                <div class="theme-card-description">Warm oranges</div>
                            </div>
                            <div class="theme-card-check">‚úì</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Side Panel for Recipe Information -->
    <div class="side-panel-overlay" id="sidePanelOverlay"></div>
    <div class="side-panel" id="sidePanel">
        <div class="side-panel-header">
            <h2 id="sidePanelRecipeName"></h2>
            <button class="side-panel-close" id="sidePanelClose">&times;</button>
        </div>
        <div class="side-panel-content" id="sidePanelContent">
            <!-- Recipe details will be inserted here -->
        </div>
        <div class="side-panel-actions">
            <button class="btn btn-primary" id="sidePanelFavoriteBtn">‚òÜ Add to Favorites</button>
            <button class="btn btn-secondary" id="sidePanelShoppingBtn">üõí Add to Shopping List</button>
            <button class="btn btn-secondary" id="sidePanelPrintBtn">üñ®Ô∏è Print</button>
            <button class="btn btn-secondary" id="sidePanelEditBtn">Edit</button>
            <button class="btn btn-danger" id="sidePanelDeleteBtn">Delete</button>
        </div>
    </div>

    <!-- Recipe Selection Modal for Shopping List -->
    <div class="modal" id="recipeSelectionModal">
        <div class="modal-content modal-content-large">
            <div class="modal-header">
                <h2>Select Recipes</h2>
                <button class="modal-close" id="recipeSelectionClose">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Choose one or more recipes to add their ingredients to your shopping list</p>
                <div class="recipe-selection-list" id="recipeSelectionList">
                    <!-- Recipe checkboxes will be inserted here -->
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelRecipeSelectionBtn">Cancel</button>
                <button class="btn btn-primary" id="confirmRecipeSelectionBtn">Add to Shopping List</button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div class="toast" id="toast"></div>

    <!-- Mobile Helper Tooltip -->
    <div class="mobile-helper" id="mobileHelper" style="display: none;">
        <div class="mobile-helper-content">
            <button class="mobile-helper-close" id="mobileHelperClose">&times;</button>
            <h3>üí° Mobile Tips</h3>
            <ul>
                <li>Long-press on recipe cards to add/remove tags quickly</li>
                <li>Tap on tags to filter recipes</li>
                <li>Click recipe cards to view details in the side panel</li>
                <li>All your data is saved locally on your device</li>
            </ul>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" id="fabBtn" onclick="openRecipeEditorModal()" aria-label="Add new recipe" title="Add new recipe">
        <span class="fab-icon">+</span>
    </button>

    <!-- First-Time User Guide Overlay -->
    <div class="first-time-overlay" id="firstTimeOverlay">
        <div class="first-time-content">
            <div class="first-time-header">
                <h2>üéÇ Happy Birthday Hunny Buns!</h2>
                <p class="first-time-subtitle">Here's the basics!</p>
            </div>
            <div class="first-time-steps">
                <div class="first-time-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Add a Recipe</h3>
                        <p>Click the <strong>+</strong> button to add your favorite recipes</p>
                    </div>
                </div>
                <div class="first-time-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Import from JSON</h3>
                        <p>Or import recipes from JSON files in the Data section</p>
                    </div>
                </div>
                <div class="first-time-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Organize with Tags</h3>
                        <p>Use tags to categorize and organize your recipes</p>
                    </div>
                </div>
                <div class="first-time-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Search & Filter</h3>
                        <p>Easily find recipes using the search bar and filters</p>
                    </div>
                </div>
            </div>
            <div class="first-time-footer">
                <div class="first-time-checkbox">
                    <input type="checkbox" id="dontShowAgain">
                    <label for="dontShowAgain">Don't show this again</label>
                </div>
                <button class="btn btn-primary first-time-btn" id="gotItBtn">Got it!</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
